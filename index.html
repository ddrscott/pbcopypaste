<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>A Tale of Two Besties :: pbcopy and pbpaste</title>

    <meta name="author" content="Scott Pierce">
    <meta name="description" content="`pbcopy` and `pbpaste` were the new kids at OSX High School...">

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="https://ddrscott.github.io/pbcopypaste" />
    <meta name="twitter:creator" content="@_ddrscott_" />
    <meta name="twitter:image" content="https://ddrscott.github.io/pbcopypaste/preview.jpg" />

    <meta property="og:title" content="A Tale of Two Besties :: `pbcopy` and `pbpaste`" />
    <meta property="og:image" content="https://ddrscott.github.io/pbcopypaste/preview.jpg" />
    <meta property="og:description" content="`pbcopy` and `pbpaste` were the new kids at OSX High School..." />

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/pink.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <!-- <link rel="stylesheet" href="lib/css/zenburn.css"> -->

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-50126719-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-50126719-1');
    </script>

    <!--[if lt IE 9]>
      <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h1>A Tale of Two Besties<br><small>pbcopy and pbpaste</small></h1>
          <p>
            <small>Created by <a
           href="https://ddrscott.github.io">Unicorns</a>
              <br/>
              Illustrated by <a href="https://twitter.com/brianmehrman">@brianmehrman</a> 
            </small>
          </p>
        </section>

        <section class="cover">
          <h2>OSX High School</h2>
          <img src="images/osx_high.svg" alt="OSX High School" />
          <small>
            <code>pbcopy</code> and <code>pbpaste</code> were the new kids at OSX High School.
            All the students picked on them because they could never do anything on
            their own. Teachers thought they were weird for always playing with
            pipes.
          </small>
        </section>

        <section class="cover">
          <h2>Blank Pages</h2>
          <img src="images/website_down.svg" alt="Blank Pages" />
          <small>
            On the first day after winter break, the school website was
            rendering blank pages. No one could see their calendars or agendas
            and the IT guy was stuck in Bermuda.
          </small>
        </section>

        <section class="cover">
          <h2>Ada</h2>
          <img src="images/website_console.svg" alt="Web Console" />
          <small>
            Ada, the STEM lab assistant, thought she'd better take a look. She
            started by poking around in the browser's devtools. The responses
            were all 200s, but there were some console errors.
          </small>
        </section>

        <section>
          <h2>Eureka!</h2>
          <pre><code class="bigger">Can't read property 'event_dt' of undefined.</code></pre>
          <p>
            "Eureka!", Ada exclaimed. "The JSON response must have changed!"
          </p>
        </section>

        <section class="cover">
          <h2>Too Much Text </h2>
          <img src="images/website_loading.svg" alt="Web Loading" />
          <small>
            She quickly went to the response tab and tried to preview the data,
            but there was too much for her browser to handle. She copied the
            response using CMD-a and CMD-c, and tried to paste it into her
            editor. Alas, the editor kept freezing trying to format the huge
            amount of text!
          </small>
        </section>

        <section class="cover">
          <h2>pbpaste</h2>
          <img src="images/worried_teacher.svg" alt="Worried Teacher" />
          <small>
            <code>pbpaste</code> wandered by noticing the frustration in Ada's slouch.
            <br/>
            She came right up to Ada and said, "Um, I can put that JSON in a file for you. Would you mind if I took a shot at it?"
            <br/>
            "Go ahead", scoffed Ada in disbelief, "Let's see what you can do."
          </small>
        </section>

        <section>
          <pre><code class="bigger">
pbpaste > data.json
          </code></pre>
          <br/>
          <small>
            Ada was shocked. "Wha, WHAT?! How'd you do that so fast?!" she exclaimed.
          </small>
        </section>

        <section>
          <small>
            <code>pbpaste</code> responded, "It's because I have direct access
            to the pasteboard. I can read it to any file or command. Watch this!
          </small>
          <pre><code class="bigger">
pbpaste | jq . > formatted.json
          </pre></code>
          <small>
            I can pipe my output to <code>jq</code> to pretty format the JSON. All without a bloated IDE slowing things down."
          </small>
          <br/>
        </section>

        <section class="cover">
          <small> "I can also work with my bestie, <code>pbcopy</code>, to get the results back into the pasteboard!"
          </small>
          <img src="images/pbcopy_joins_in.svg" alt="pbcopy joins in" />
          <small>
            <code>pbpaste</code> yelled down the hallway, "<code>pbcopy</code> get over here! Let's show Ada our sweet moves!"
          </small>
        </section>
        <section>
          <h2>Sweet Moves</h2>
          <pre><code class="bigger">
pbpaste | jq . | pbcopy
          </code></pre>
        </section>

        <section class="cover">
          <img src="images/absorbed_data.svg" alt="absorbed" />
          <small>
            <code>pbcopy</code> sat back as if she'd just finished a big meal. She gloated, "When I work together with <code>pbpaste</code>, you won't need to waste brain cells thinking of clever temporary file names!"
          </small>
        </section>

        <section class="cover">
          <h2>Rails Console</h2>
          <img src="images/what_about_ruby.svg" alt="What about Ruby?" />
          <small>
            Ada wanted to bring them down a notch. She stated, "This is great when I'm in shell, but I usually have all my data in Rails objects from within the console. Then what?"

          </small>
        </section>
        <section>
          <h2>popen</h2>
          <small>
            Leaning forward, <code>pbcopy</code> responded, "That's even better! When you're in IRB, try piping the data straight to me."
          </small>
          <pre><code class="bigger">
IO.popen('jq . | `pbcopy`', 'w') do |io|
  io.write(items.to_json)
end
          </code></pre>
          <h3>One Liner</h3>
          <pre><code class="bigger">
IO.popen('jq . | `pbcopy`', 'w'){|❤️| ❤️ << items.to_json}
          </code></pre>
        </section>

        <section>
          <h2>Backticks</h2>
          <small>"Furthermore", <code>pbcopy</code> says, "if you want to read from the clipboard, use backticks!"
          </small>

          <pre><code class="bigger">
lines = `pbpaste`.split("\n")
          </code></pre>
        </section>

        <section>
          <h2>But Wait There's More</h2>
          <small> Together, they were so excited and said at the same time, "We have
            this snippet in our <code>~/.pryrc</code> which makes working with us even easier!"
          </small>
          <pre><code class="bigger">def copy(data=nil)
  IO.popen('pbcopy', 'w') do |io| 
    if block_given?
      yield io
      puts "\e[34mCopied block!\e[0m"
    elsif data
      io << data.to_s
      puts "\e[34mCopied data!\e[0m"
    else
      puts "\e[31mNothing to copy :(\e[0m"
      puts "\e[34m  Try `copy { |c| c << data }`"
      puts "   or `copy data`\e[0m"
    end
  end
end
</code></pre>
        </section>

        <section>
          <h2>Pry</h2>
          <small>
            They continued, "Now, in Pry we can use <code>copy _</code> to send the last result to the pasteboard!"
          </small>
          <pre><code class="bigger">copy _</pre></code>
        </section>


        <section>
          <h2>Typo</h2>
          <small>
            In the midst of all the terminal output and pretty formatted JSON, <code>pbpaste</code> noticed an odd misspelling.
          </small>
          <pre><code>
{
  posts: ["..."]
  aggendas: ["..."]
}
          </code></pre>
        </section>

        <section class="cover">
          <h2>Solved</h2>
          <small>
            "This is what must be causing the undefined error! Isn't ajjenda spelled with 'j's?" <code>pbpaste</code> asked.
            <br/>
            <code>pbcopy</code> jumped in quickly, "Correction, it only has <em>one</em> 'j'!"
          </small>
          <img src="images/face_palm.svg" alt="Face palm" />
        </section>
        <section class="cover">
          <h2>The End</h2>
          <small>
            Ada, finally smiling, replied "You two were made for each other!"*
          </small>
          <img src="images/pbpaste_and_pbcopy.svg" alt="Together" />
          <br/>
          <small style="font-size: 0.35em">
            * `agenda` is the correct spelling. They both got it wrong.
          </small>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## Thanks!
            - <a href="https://twitter.com/brianmehrman">@brianmehrman</a> for illustrations!
            - https://neovim.io/
            - https://revealjs.com/
            - http://paletton.com/#uid=75i0u0k5uTk00++29Z49uK7e4y1
            - https://fonts.google.com/
          </script>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/search/search.js', async: true },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
